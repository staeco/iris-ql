CREATE OR REPLACE FUNCTION null_if_empty_array(a text[]) RETURNS text[] AS $$
  SELECT NULLIF(a, ARRAY[]::text[]);
$$ LANGUAGE SQL IMMUTABLE PARALLEL SAFE
RETURNS NULL ON NULL INPUT;
